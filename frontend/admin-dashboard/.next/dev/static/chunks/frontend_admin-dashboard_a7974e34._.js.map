{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///mnt/a29372f8-b47b-4a57-961a-4c0a75a3a75b/1_customercare/customer-support-ai-control-plane/frontend/admin-dashboard/app/login/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\n\nconst API_BASE =\n  process.env.NEXT_PUBLIC_API_BASE_URL?.trim() || \"http://localhost:8010\";\n\nexport default function AdminLoginPage() {\n  const router = useRouter();\n\n  const [email, setEmail] = useState(\"admin@example.com\");\n  const [password, setPassword] = useState(\"admin123\");\n  const [error, setError] = useState<string | null>(null);\n  const [loading, setLoading] = useState(false);\n\n  /**\n   * If admin session already exists → redirect to /\n   */\n  useEffect(() => {\n    const hasToken =\n      document.cookie.includes(\"csacp_admin_access_token\") ||\n      document.cookie.includes(\"csacp_admin_refresh_token\");\n\n    if (hasToken) {\n      router.replace(\"/\");\n    }\n  }, [router]);\n\n  async function handleSubmit(e: React.FormEvent) {\n    e.preventDefault();\n    setError(null);\n    setLoading(true);\n\n    try {\n      const res = await fetch(`${API_BASE}/auth/login`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        credentials: \"include\", // <-- IMPORTANT (store HttpOnly cookie)\n        body: JSON.stringify({\n          email: email.trim(),\n          password,\n        }),\n      });\n\n      if (!res.ok) {\n        let message = `Login failed (${res.status})`;\n        try {\n          const data = await res.json();\n          if (data?.detail) message = String(data.detail);\n        } catch {}\n        throw new Error(message);\n      }\n\n      const data = await res.json();\n\n      // Require admin role\n      if (data?.role !== \"admin\") {\n        throw new Error(\"This account is not an admin account\");\n      }\n\n      // Successful login → go to admin home\n      router.replace(\"/\");\n    } catch (err: any) {\n      setError(err?.message || \"Login failed\");\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  return (\n    <div\n      style={{\n        minHeight: \"100vh\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        background: \"#f8fafc\",\n        padding: \"1.5rem\",\n      }}\n    >\n      <form\n        onSubmit={handleSubmit}\n        style={{\n          width: 380,\n          padding: \"2rem\",\n          background: \"#ffffff\",\n          borderRadius: 10,\n          border: \"1px solid #e2e8f0\",\n        }}\n      >\n        <h1\n          style={{\n            fontSize: 18,\n            fontWeight: 700,\n            marginBottom: \"1.25rem\",\n            textAlign: \"center\",\n          }}\n        >\n          Admin Login\n        </h1>\n\n        <div style={{ marginBottom: \"1rem\" }}>\n          <label style={{ fontSize: 13, display: \"block\" }}>Email</label>\n          <input\n            type=\"email\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n            autoComplete=\"email\"\n            required\n            style={{\n              width: \"100%\",\n              padding: \"0.6rem\",\n              marginTop: 6,\n              borderRadius: 6,\n              border: \"1px solid #cbd5e1\",\n              outline: \"none\",\n            }}\n          />\n        </div>\n\n        <div style={{ marginBottom: \"1rem\" }}>\n          <label style={{ fontSize: 13, display: \"block\" }}>Password</label>\n          <input\n            type=\"password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            autoComplete=\"current-password\"\n            required\n            style={{\n              width: \"100%\",\n              padding: \"0.6rem\",\n              marginTop: 6,\n              borderRadius: 6,\n              border: \"1px solid #cbd5e1\",\n              outline: \"none\",\n            }}\n          />\n        </div>\n\n        {error && (\n          <div\n            style={{\n              marginBottom: \"1rem\",\n              color: \"#b91c1c\",\n              fontSize: 13,\n              lineHeight: 1.4,\n            }}\n          >\n            {error}\n          </div>\n        )}\n\n        <button\n          type=\"submit\"\n          disabled={loading}\n          style={{\n            width: \"100%\",\n            padding: \"0.7rem\",\n            borderRadius: 6,\n            border: \"none\",\n            background: \"#2563eb\",\n            color: \"#ffffff\",\n            fontWeight: 600,\n            cursor: loading ? \"not-allowed\" : \"pointer\",\n          }}\n        >\n          {loading ? \"Signing in…\" : \"Sign in\"}\n        </button>\n\n        <div style={{ marginTop: \"0.75rem\", fontSize: 12, color: \"#64748b\" }}>\n          API: {API_BASE}\n        </div>\n      </form>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 261, "column": 0}, "map": {"version":3,"sources":["file:///mnt/a29372f8-b47b-4a57-961a-4c0a75a3a75b/1_customercare/customer-support-ai-control-plane/frontend/admin-dashboard/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0]}}]
}